{"version":3,"sources":["js/index.js"],"names":["form","document","querySelector","ValidateClientSideForm","_form","validator","email","regex","message","text","password","_errors","fields","querySelectorAll","addEventListener","handleSubmit","bind","forEach","field","handleFocus","handleBlur","handleInput","value","type","name","test","validate","removeAlert","id","addAlert","find","setAlert","setError","clearAlert","clearError","classList","add","remove","setAttribute","labels","textContent","join","nextElementSibling","contains","setCustomValidity","errName","includes","push","length","splice","indexOf","el","focus","filter","setFocus","getEmptyFields","addValidation","event","target","reset","parentElement","preventDefault","submitForm","resetForm","init"],"mappings":"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","file":"js.cfd39b41.js","sourceRoot":"../src","sourcesContent":["(function() {\n  const form = document.querySelector(\"form\");\n\n  /**\n   * Client-Side Validation\n   * ATTENTION: Server-side validation is REQUIRED\n   */\n  class ValidateClientSideForm {\n    constructor(form) {\n      this._form = form;\n\n      /*\n      Validation patterns for different field types. Password validation is very loose, don't forget this is only a demo without clear requirement about this type of data.\n      */\n      this.validator = {\n        email: {\n          regex: /^([a-zA-Z0-9\\.-]{1,64})+@([a-z]{1,254})+\\.([a-z]{2,8})(\\.[a-z]{2,8})?$/,\n          message: \"Looks like this is not an email\"\n        },\n        text: {\n          regex: /^[a-zA-Z\\s]+?$/,\n          message: \"cannot be empty\"\n        },\n        password: {\n          regex: /^[a-zA-Z0-9\\_-]+?$/,\n          message: \"cannot be empty\"\n        }\n      };\n\n      this._errors = [];\n\n      this.fields = [\n        ...this._form.querySelectorAll(\"input:not([type='submit'])\")\n      ];\n    }\n\n    init() {\n      this._form.addEventListener(\"submit\", this.handleSubmit.bind(this));\n\n      this.fields.forEach(field => {\n        field.addEventListener(\"focus\", this.handleFocus.bind(this), true);\n        field.addEventListener(\"blur\", this.handleBlur.bind(this), true);\n        field.addEventListener(\"input\", this.handleInput.bind(this));\n      });\n    }\n\n    validate(field) {\n      const { value, type, name } = field;\n\n      if (value === \"\") return false;\n      else if (name === \"email\" || type === \"email\")\n        return this.validator[name].regex.test(value);\n      else return this.validator[type].regex.test(value);\n    }\n\n    addValidation(field) {\n      if (this.validate(field)) this.removeAlert(field.id);\n      else this.addAlert(field.id);\n    }\n\n    addAlert(id) {\n      const field = this.fields.find(field => field.id === id);\n      this.setAlert(field);\n      this.setError(field.name);\n    }\n\n    removeAlert(id) {\n      const field = this.fields.find(field => field.id === id);\n      this.clearAlert(field);\n      this.clearError(field.name);\n    }\n\n    setAlert(field) {\n      const { type, name } = field;\n      field.classList.add(\"invalid\");\n      field.classList.remove(\"valid\");\n      field.setAttribute(\"aria-invalid\", true);\n\n      const message = `${\n        name === \"email\"\n          ? this.validator[name].message\n          : [field.labels[0].textContent, this.validator[type].message].join(\n              ` `\n            )\n      }`;\n      if (field.nextElementSibling.classList.contains(\"help\"))\n        field.nextElementSibling.textContent = message;\n      field.setCustomValidity(message);\n    }\n\n    clearAlert(field) {\n      field.classList.remove(\"invalid\");\n      field.classList.add(\"valid\");\n      field.setAttribute(\"aria-invalid\", false);\n      if (field.nextElementSibling.classList.contains(\"help\"))\n        field.nextElementSibling.textContent = \"\";\n      field.setCustomValidity(\"\");\n    }\n\n    setError(errName) {\n      if (this._errors.includes(errName)) return;\n      this._errors.push(errName);\n    }\n\n    clearError(errName) {\n      if (this._errors.length == 0) return;\n      this._errors.splice(this._errors.indexOf(errName), 1);\n    }\n\n    setFocus(name) {\n      const el = this.fields.find(el => el.name === name);\n      el.focus();\n    }\n\n    getEmptyFields() {\n      return this.fields.filter(field => {\n        return field.value === \"\";\n      });\n    }\n\n    submitForm() {\n      // If found errors from instant validation then auto focus the first error\n      if (this._errors.length > 0) {\n        this.setFocus(this._errors[0]);\n        return false;\n      }\n      // else validate fields if user left empty fields\n      else if (this.getEmptyFields().length > 0) {\n        this.getEmptyFields().forEach(field => {\n          this.addValidation(field);\n        });\n        this.setFocus(this.getEmptyFields()[0].name);\n        return false;\n      }\n      // ready to subumit form\n      else return true;\n    }\n\n    resetForm(event) {\n      event.target.reset();\n      this.fields.forEach(field => {\n        this.removeAlert(field.id);\n        field.parentElement.classList.remove(\"focused\");\n        field.classList.remove(\"valid\");\n      });\n    }\n\n    handleSubmit(event) {\n      event.preventDefault();\n\n      // returns true if form has no errors else false forms has errors.\n      if (this.submitForm()) {\n        // console.log(\"Succesful!\");\n        this.resetForm(event);\n        return true;\n      } else {\n        // console.log(\"Failed!\");\n        return false;\n      }\n    }\n\n    handleFocus({ target }) {\n      if (target.parentElement.classList.contains(\"input\"))\n        target.parentElement.classList.add(\"focused\");\n    }\n\n    handleBlur({ target }) {\n      if (target.parentElement.classList.contains(\"input\"))\n        if (target.value.length == 0) {\n          target.parentElement.classList.remove(\"focused\");\n        }\n    }\n\n    handleInput({ target }) {\n      // handles instant validation the field\n      this.addValidation(target);\n    }\n  }\n\n  new ValidateClientSideForm(form).init();\n})();\n"]}